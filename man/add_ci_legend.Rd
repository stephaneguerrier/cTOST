% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.R
\name{add_ci_legend}
\alias{add_ci_legend}
\title{Add a Custom Legend with Confidence Interval Symbols}
\usage{
add_ci_legend(args)
}
\arguments{
\item{args}{A single list containing arguments. This list should include
standard parameters to be passed to the base `legend()` function (e.g., `x`,
`legend`, `title`, `col`, `pch`, `lwd`, `bty`, `cex`) as well as the custom
parameters detailed below.}
}
\value{
NULL. The function updates a plot.
}
\description{
This is a helper function designed to be called by a main plotting function. It
draws a plot legend where the default keys (points, lines) are replaced with
custom symbols that mimic confidence intervals (a point with capped error bars).
It also dynamically calculate horizontal spacing for legend items to ensure
a clean, constant layout, even when labels have variable lengths.
}
\details{
## How It Works
The function operates in three main steps:
1.  It calls `legend(..., plot = FALSE)` to calculate the coordinates for the
    legend box and text without drawing anything.
2.  It calls `legend()` a second time to draw *only* the text labels.
3.  It uses the coordinates from step 1 to manually draw the custom CI
    symbols in the space where the normal legend keys would be.

## Custom Spacing and Symbols
The behavior is controlled by several custom list items within the `args` parameter:
- **`equal_spacing`**: Logical. If `TRUE` (the default) and the legend is
  horizontal (`horiz = TRUE`), the function dynamically calculates a vector of
  `x.intersp` values. This ensures each legend item occupies the same
  total width, creating constant visual spacing between them.
- **`symbol_space`**: Numeric. A factor controlling the total horizontal
  space reserved for each custom symbol to the left of the text.
- **`bar_width_ratio`**: Numeric. The width of the CI error bar in the symbol,
  expressed as a ratio of the total `symbol_space`.
- **`cap_length`**: Numeric. The length of the end caps on the CI symbol,
  which is passed to the `arrows()` function.
}
\keyword{internal}
